<!doctype html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="NYC Public High School SAT Score AnalysisAnalysis of 2011 SAT scores of NYC 13 district high schoolers, among with various demographic and other information about them
*479 High School SAT score with">
<meta property="og:type" content="article">
<meta property="og:title" content="NYC Public High School SAT Score Analysis">
<meta property="og:url" content="https://demoninpiano.github.io/2017/02/21/NYCHighschool/index.html">
<meta property="og:site_name" content="Dawei's homepage!">
<meta property="og:description" content="NYC Public High School SAT Score AnalysisAnalysis of 2011 SAT scores of NYC 13 district high schoolers, among with various demographic and other information about them
*479 High School SAT score with">
<meta property="og:image" content="https://demoninpiano.github.io/2017/02/21/NYCHighschool/clustering.png">
<meta property="og:image" content="https://demoninpiano.github.io/2017/02/21/NYCHighschool/heatMap.png">
<meta property="og:image" content="https://demoninpiano.github.io/2017/02/21/NYCHighschool/ell.png">
<meta property="og:image" content="https://demoninpiano.github.io/2017/02/21/NYCHighschool/ell_precentage.png">
<meta property="og:image" content="https://demoninpiano.github.io/2017/02/21/NYCHighschool/race_diff.png">
<meta property="og:image" content="https://demoninpiano.github.io/2017/02/21/NYCHighschool/asian.png">
<meta property="og:image" content="https://demoninpiano.github.io/2017/02/21/NYCHighschool/white.png">
<meta property="og:image" content="https://demoninpiano.github.io/2017/02/21/NYCHighschool/black_pre.png">
<meta property="og:image" content="https://demoninpiano.github.io/2017/02/21/NYCHighschool/hispanic.png">
<meta property="og:image" content="https://demoninpiano.github.io/2017/02/21/NYCHighschool/SATvisul.png">
<meta property="og:image" content="https://demoninpiano.github.io/2017/02/21/NYCHighschool/gender.png">
<meta property="og:updated_time" content="2017-02-21T22:47:03.538Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="NYC Public High School SAT Score Analysis">
<meta name="twitter:description" content="NYC Public High School SAT Score AnalysisAnalysis of 2011 SAT scores of NYC 13 district high schoolers, among with various demographic and other information about them
*479 High School SAT score with">
<meta name="twitter:image" content="https://demoninpiano.github.io/2017/02/21/NYCHighschool/clustering.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://demoninpiano.github.io/2017/02/21/NYCHighschool/"/>





  <title> NYC Public High School SAT Score Analysis | Dawei's homepage! </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Dawei's homepage!</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
    
      <p class="site-subtitle"></p>
    
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://demoninpiano.github.io/2017/02/21/NYCHighschool/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Dawei Wang">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/dw_image.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Dawei's homepage!">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Dawei's homepage!" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                NYC Public High School SAT Score Analysis
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-21T14:47:03-08:00">
                2017-02-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Tech-Article/" itemprop="url" rel="index">
                    <span itemprop="name">Tech Article</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="NYC-Public-High-School-SAT-Score-Analysis"><a href="#NYC-Public-High-School-SAT-Score-Analysis" class="headerlink" title="NYC Public High School SAT Score Analysis"></a>NYC Public High School SAT Score Analysis</h2><p>Analysis of 2011 SAT scores of NYC 13 district high schoolers, among with various demographic and other information about them</p>
<p>*479 High School SAT score with demographic and graduation data</p>
<p>*District Level Data Visulization</p>
<p>*District Level NYC High School Clustering</p>
<a id="more"></a>
<h2 id="Background-Information"><a href="#Background-Information" class="headerlink" title="Background Information"></a>Background Information</h2><p>1.New York City is divided into 5 boroughs, which are essentially distinct regions.</p>
<p>2.Schools in New York City are divided into several school district, each of which can contains dozens of schools.</p>
<p>3.Not all the schools in all of the datasets are high schools, so weâ€™ll need to do some data cleaning.</p>
<p>4.Each school in New York City has a unique code called a DBN, or District Borough Number.</p>
<p>5.By aggregating data by district, we can use the district mapping data to plot district-by-district differences.</p>
<h2 id="Data"><a href="#Data" class="headerlink" title="Data"></a>Data</h2><p>The Detail information of Data and its download link are list below</p>
<p>1.<a href="https://data.cityofnewyork.us/Education/AP-College-Board-2010-School-Level-Results/itfs-ms3e" target="_blank" rel="external">2010 ap test resut</a></p>
<p>2.<a href="https://data.cityofnewyork.us/Education/2010-2011-Class-Size-School-level-detail/urz7-pzb3" target="_blank" rel="external">2010-11 class size</a></p>
<p>3.<a href="https://data.cityofnewyork.us/Education/School-Demographics-and-Accountability-Snapshot-20/ihfw-zy9j" target="_blank" rel="external">2006-12 demographic</a></p>
<p>4.<a href="https://data.cityofnewyork.us/Education/Graduation-Outcomes-Classes-Of-2005-2010-School-Le/vh2h-md7a" target="_blank" rel="external">2005-10 graduation outcomes</a></p>
<p>5.<a href="https://data.cityofnewyork.us/Education/School-Attendance-and-Enrollment-Statistics-by-Dis/7z8d-msnt" target="_blank" rel="external">2010-11 School Attendance and Enrollment Statistics by District (hs_directory.csv)</a></p>
<p>6.<a href="https://data.cityofnewyork.us/Education/NYS-Math-Test-Results-By-Grade-2006-2011-School-Le/jufi-gzgp" target="_blank" rel="external">2006-10 Math Result</a></p>
<p>7.<a href="https://data.cityofnewyork.us/Education/SAT-Results/f9bf-2cp4" target="_blank" rel="external">2012 SAT Score Result</a></p>
<p>8.<a href="https://data.cityofnewyork.us/Education/School-Districts/r8nu-ymqj" target="_blank" rel="external">school district map</a></p>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><h3 id="Download-the-Repo"><a href="#Download-the-Repo" class="headerlink" title="Download the Repo"></a>Download the Repo</h3><ul>
<li><p>Clone this repo to your computer.</p>
</li>
<li><p>Get into the folder using <code>cd NYC Public School SAT Analysis</code>.</p>
</li>
<li><p>Data already in the Data folder</p>
</li>
</ul>
<h3 id="Install-the-requirements"><a href="#Install-the-requirements" class="headerlink" title="Install the requirements"></a>Install the requirements</h3><ul>
<li>Install the requirements using <code>pip install -r requirements.txt</code>.<ul>
<li>Make sure you use Python 2.7.</li>
<li>You may want to use a virtual environment for this.</li>
</ul>
</li>
</ul>
<h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><ul>
<li>Run  <code>main.ipynb</code> in jupyter notebook to do the analysis</li>
</ul>
<h2 id="Indexing"><a href="#Indexing" class="headerlink" title="Indexing"></a>Indexing</h2><ol>
<li><a href="#Input-Data">Input Data</a></li>
<li><a href="#Merging-Dataset">Merging Dataset</a></li>
<li><a href="#Unifing-Data">Unifing Data</a></li>
<li><a href="#Condensing-Data">Condensing Data </a></li>
<li><a href="#Combining-Datasets">Combining Datasets</a></li>
<li><a href="#School-Location-Clustering">School Location Clustering</a></li>
<li><a href="#School-Location-Hea-Map">School Location Heat Map</a></li>
<li><a href="#District-Leavl-SAT-Scores-Mapping">District Leavl SAT Scores Mapping</a></li>
<li><a href="#Correlating-English-Learner-and-SAT-scores">Correlating English Learner and SAT scores</a></li>
<li><a href="#Correlating-race-and-SAT-scores">Correlating race and SAT scores</a></li>
<li><a href="#District-Leavl-Gender-Mapping">Correlating Gender and SAT scores</a></li>
</ol>
<h2 id="Input-Data"><a href="#Input-Data" class="headerlink" title="Input Data"></a>Input Data</h2><p>Firstly, we input raw data from the dataset discussed above.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> pandas</div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line">%matplotlib inline</div><div class="line"></div><div class="line"><span class="keyword">import</span> folium</div><div class="line"><span class="keyword">from</span> folium <span class="keyword">import</span> plugins</div><div class="line"></div><div class="line"></div><div class="line">files = [<span class="string">"2010 ap.csv"</span>, <span class="string">"2010-11 class_size.csv"</span>, <span class="string">"2006-12 demographics.csv"</span>, <span class="string">"2003-06 Graduation_Outcomes.csv"</span>, <span class="string">"2010-11 hs_directory.csv"</span>, <span class="string">"2006-10 math_test_results.csv"</span>, <span class="string">"2012 sat_results.csv"</span>]</div><div class="line"></div><div class="line">data = &#123;&#125;</div><div class="line"><span class="keyword">for</span> f <span class="keyword">in</span> files:</div><div class="line">    d = pandas.read_csv(<span class="string">"Data/&#123;0&#125;"</span>.format(f))</div><div class="line">    data[f.replace(<span class="string">".csv"</span>, <span class="string">""</span>)] = d</div><div class="line">    </div><div class="line">data[<span class="string">"ap"</span>] = data.pop(<span class="string">"2010 ap"</span>)</div><div class="line">data[<span class="string">"class_size"</span>] = data.pop(<span class="string">"2010-11 class_size"</span>)</div><div class="line">data[<span class="string">"demographics"</span>] = data.pop(<span class="string">"2006-12 demographics"</span>)</div><div class="line">data[<span class="string">"graduation"</span>] = data.pop(<span class="string">"2003-06 Graduation_Outcomes"</span>)</div><div class="line">data[<span class="string">"hs_directory"</span>] = data.pop(<span class="string">"2010-11 hs_directory"</span>)</div><div class="line">data[<span class="string">'math_test_results'</span>] = data.pop(<span class="string">"2006-10 math_test_results"</span>)</div><div class="line">data[<span class="string">"sat_results"</span>] = data.pop(<span class="string">"2012 sat_results"</span>)</div></pre></td></tr></table></figure>
<h2 id="Unifing-Data"><a href="#Unifing-Data" class="headerlink" title="Unifing Data"></a>Unifing Data</h2><p>Before merging data set, we need to unify all dataset that has the same column name</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#class_size Data sets hasn't the uniform shcool code. Need to clean the feature</span></div><div class="line">data[<span class="string">"class_size"</span>][<span class="string">"DBN"</span>] = data[<span class="string">"class_size"</span>].apply(<span class="keyword">lambda</span> x: <span class="string">"&#123;0:02d&#125;&#123;1&#125;"</span>.format(x[<span class="string">"CSD"</span>], x[<span class="string">"SCHOOL CODE"</span>]), axis=<span class="number">1</span>)</div><div class="line">data[<span class="string">"hs_directory"</span>][<span class="string">"DBN"</span>] = data[<span class="string">"hs_directory"</span>][<span class="string">"dbn"</span>]</div></pre></td></tr></table></figure>
<h2 id="Condensing-Data"><a href="#Condensing-Data" class="headerlink" title="Condensing Data"></a>Condensing Data</h2><p>Since different raw data has different range of date. Using latest available data for all datasets.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment">##########################################################################</span></div><div class="line"><span class="comment">##############For Each dataset, using most recent year data###############</span></div><div class="line"><span class="comment">##########################################################################</span></div><div class="line"></div><div class="line"><span class="comment">#Group class size based on school code(DBN)</span></div><div class="line"></div><div class="line">class_size = data[<span class="string">"class_size"</span>]</div><div class="line">class_size = class_size[class_size[<span class="string">"GRADE "</span>] == <span class="string">"09-12"</span>]</div><div class="line">class_size = class_size[class_size[<span class="string">"PROGRAM TYPE"</span>] == <span class="string">"GEN ED"</span>]</div><div class="line">class_size = class_size.groupby(<span class="string">"DBN"</span>).agg(np.mean)</div><div class="line"></div><div class="line"><span class="comment">#Put DBN back to columns instead of index</span></div><div class="line">class_size.reset_index(inplace=<span class="keyword">True</span>)</div><div class="line">data[<span class="string">"class_size"</span>] = class_size</div><div class="line"></div><div class="line"><span class="comment">## Collect most recent Data</span></div><div class="line">demographics = data[<span class="string">"demographics"</span>]</div><div class="line">demographics = demographics[demographics[<span class="string">"schoolyear"</span>] == <span class="number">20112012</span>]</div><div class="line">data[<span class="string">"demographics"</span>] = demographics</div><div class="line"></div><div class="line"><span class="comment">## Filter Function</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">mask</span><span class="params">(df, key, value)</span>:</span></div><div class="line">    <span class="keyword">return</span> df[df[key] == value]</div><div class="line">pandas.DataFrame.mask = mask</div><div class="line"></div><div class="line">data[<span class="string">"math_test_results"</span>] = (data[<span class="string">"math_test_results"</span>].mask(<span class="string">"Year"</span>,<span class="number">2011</span>)).mask(<span class="string">"Grade"</span>,<span class="string">"8"</span>)</div><div class="line">data[<span class="string">"graduation"</span>] = data[<span class="string">"graduation"</span>].mask(<span class="string">"Demographic"</span>,<span class="string">"Total Cohort"</span>).mask(<span class="string">"Cohort"</span>,<span class="string">"2006"</span>)</div><div class="line"></div><div class="line">data[<span class="string">"graduation"</span>] = data[<span class="string">"graduation"</span>][data[<span class="string">"graduation"</span>][<span class="string">"Demographic"</span>] == <span class="string">"Total Cohort"</span>]</div><div class="line"><span class="comment">## Using last recent data</span></div><div class="line">data[<span class="string">"graduation"</span>] = data[<span class="string">"graduation"</span>][data[<span class="string">"graduation"</span>][<span class="string">"Cohort"</span>] == <span class="string">"2006"</span>]</div></pre></td></tr></table></figure>
<p>Calculating Overall SAT score based on the SAT Math, Reading, Writing Data.<br>Convert the raw geojson data from string type to numeric type</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">## Calculate Total SAT score</span></div><div class="line">cols = [<span class="string">'SAT Math Avg. Score'</span>, <span class="string">'SAT Critical Reading Avg. Score'</span>, <span class="string">'SAT Writing Avg. Score'</span>]</div><div class="line"><span class="keyword">for</span> c <span class="keyword">in</span> cols:</div><div class="line">    data[<span class="string">"sat_results"</span>][c] = data[<span class="string">"sat_results"</span>][c].convert_objects(convert_numeric=<span class="keyword">True</span>)</div><div class="line">data[<span class="string">'sat_results'</span>][<span class="string">'sat_score'</span>] = data[<span class="string">'sat_results'</span>][cols[<span class="number">0</span>]] + data[<span class="string">'sat_results'</span>][cols[<span class="number">1</span>]] + data[<span class="string">'sat_results'</span>][cols[<span class="number">2</span>]]</div><div class="line"></div><div class="line"><span class="comment">## Clean GeoJso data,convert str geojson data to numeric lat/lon</span></div><div class="line">data[<span class="string">"hs_directory"</span>][<span class="string">'lat'</span>] = data[<span class="string">"hs_directory"</span>][<span class="string">'Location 1'</span>].apply(<span class="keyword">lambda</span> x: x.split(<span class="string">"\n"</span>)[<span class="number">-1</span>].replace(<span class="string">"("</span>, <span class="string">""</span>).replace(<span class="string">")"</span>, <span class="string">""</span>).split(<span class="string">", "</span>)[<span class="number">0</span>])</div><div class="line">data[<span class="string">"hs_directory"</span>][<span class="string">'lon'</span>] = data[<span class="string">"hs_directory"</span>][<span class="string">'Location 1'</span>].apply(<span class="keyword">lambda</span> x: x.split(<span class="string">"\n"</span>)[<span class="number">-1</span>].replace(<span class="string">"("</span>, <span class="string">""</span>).replace(<span class="string">")"</span>, <span class="string">""</span>).split(<span class="string">", "</span>)[<span class="number">1</span>])</div><div class="line"></div><div class="line"><span class="keyword">for</span> c <span class="keyword">in</span> [<span class="string">'lat'</span>, <span class="string">'lon'</span>]:</div><div class="line">    data[<span class="string">"hs_directory"</span>][c] = data[<span class="string">"hs_directory"</span>][c].convert_objects(convert_numeric=<span class="keyword">True</span>)</div></pre></td></tr></table></figure>
<h2 id="Combining-Datasets"><a href="#Combining-Datasets" class="headerlink" title="Combining Datasets"></a>Combining Datasets</h2><p>Merging all dataset to one. Drop the rows with Null value</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">flat_data_names = [k <span class="keyword">for</span> k,v <span class="keyword">in</span> data.items()]</div><div class="line">flat_data = [data[k] <span class="keyword">for</span> k <span class="keyword">in</span> flat_data_names]</div><div class="line">full = flat_data[<span class="number">0</span>]</div><div class="line"><span class="keyword">for</span> i, f <span class="keyword">in</span> enumerate(flat_data[<span class="number">1</span>:]):</div><div class="line">    name = flat_data_names[i+<span class="number">1</span>]</div><div class="line">    <span class="comment">#print(name)</span></div><div class="line">    <span class="comment">#print(len(f["DBN"]) - len(f["DBN"].unique()))</span></div><div class="line">    join_type = <span class="string">"inner"</span></div><div class="line">    <span class="keyword">if</span> name <span class="keyword">in</span> [<span class="string">"sat_results"</span>, <span class="string">"ap_2010"</span>, <span class="string">"graduation"</span>]:</div><div class="line">        join_type = <span class="string">"outer"</span></div><div class="line">    <span class="keyword">if</span> name <span class="keyword">not</span> <span class="keyword">in</span> [<span class="string">"math_test_results"</span>]:</div><div class="line">        full = full.merge(f, on=<span class="string">"DBN"</span>, how=join_type)</div><div class="line"></div><div class="line"><span class="comment">#Clean Nan value</span></div><div class="line">cols = [<span class="string">'AP Test Takers '</span>, <span class="string">'Total Exams Taken'</span>, <span class="string">'Number of Exams with scores 3 4 or 5'</span>]</div><div class="line"></div><div class="line"><span class="keyword">for</span> col <span class="keyword">in</span> cols:</div><div class="line">    full[col] = full[col].convert_objects(convert_numeric=<span class="keyword">True</span>)</div><div class="line"></div><div class="line">full[cols] = full[cols].fillna(value=<span class="number">0</span>)</div><div class="line">full = full.fillna(full.mean())</div><div class="line"></div><div class="line"><span class="comment">#First Two Dight of DBN is District Number</span></div><div class="line">full[<span class="string">"school_dist"</span>] = full[<span class="string">"DBN"</span>].apply(<span class="keyword">lambda</span> x: x[:<span class="number">2</span>])</div></pre></td></tr></table></figure>
<h2 id="School-Location-Clustering"><a href="#School-Location-Clustering" class="headerlink" title="School Location Clustering"></a>School Location Clustering</h2><p>Clustering School Location based on the Lattitude and Longtitude data</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">######################################################################</span></div><div class="line"><span class="comment">####################School Location Clustering########################</span></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">schools_map = folium.Map(location=[full[<span class="string">'lat'</span>].mean(), full[<span class="string">'lon'</span>].mean()], zoom_start=<span class="number">10</span>)</div><div class="line">marker_cluster = folium.MarkerCluster().add_to(schools_map)</div><div class="line"><span class="keyword">for</span> name, row <span class="keyword">in</span> full.iterrows():</div><div class="line">    folium.Marker([row[<span class="string">"lat"</span>], row[<span class="string">"lon"</span>]], popup=<span class="string">"&#123;0&#125;: &#123;1&#125;"</span>.format(row[<span class="string">"DBN"</span>], row[<span class="string">"school_name"</span>])).add_to(marker_cluster)</div><div class="line">schools_map.create_map(<span class="string">'schools.html'</span>)</div><div class="line">schools_map</div></pre></td></tr></table></figure>
<img src="/2017/02/21/NYCHighschool/clustering.png" alt="clustering.png" title="">
<h2 id="School-Location-Heat-Map"><a href="#School-Location-Heat-Map" class="headerlink" title="School Location Heat Map"></a>School Location Heat Map</h2><p>Visualizating the Clustering results from heat map</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">######################################################################</span></div><div class="line"><span class="comment">####################School Location Clustering########################</span></div><div class="line"></div><div class="line">schools_heatmap = folium.Map(location=[full[<span class="string">'lat'</span>].mean(), full[<span class="string">'lon'</span>].mean()], zoom_start=<span class="number">10</span>)</div><div class="line">schools_heatmap.add_children(plugins.HeatMap([[row[<span class="string">"lat"</span>], row[<span class="string">"lon"</span>]] <span class="keyword">for</span> name, row <span class="keyword">in</span> full.iterrows()]))</div><div class="line">schools_heatmap.save(<span class="string">"heatmap.html"</span>)</div><div class="line">schools_heatmap</div></pre></td></tr></table></figure>
<img src="/2017/02/21/NYCHighschool/heatMap.png" alt="heatMap.png" title="">
<h2 id="District-Leavl-SAT-Scores-Mapping"><a href="#District-Leavl-SAT-Scores-Mapping" class="headerlink" title="District Leavl SAT Scores Mapping"></a>District Leavl SAT Scores Mapping</h2><p>Analyzing the SAT Scores from the district Level. Group by the data based on the district.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">###################################################################</span></div><div class="line"><span class="comment">########################District Map###############################</span></div><div class="line"><span class="comment">###################################################################</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">show_district_map</span><span class="params">(col)</span>:</span></div><div class="line">    geo_path = <span class="string">'Data/School Districts.geojson'</span></div><div class="line">    districts = folium.Map(location=[full[<span class="string">'lat'</span>].mean(), full[<span class="string">'lon'</span>].mean()], zoom_start=<span class="number">10</span>)</div><div class="line">    districts.geo_json(</div><div class="line">        geo_path=geo_path,</div><div class="line">        data=district_data,</div><div class="line">        columns=[<span class="string">'school_dist'</span>, col],</div><div class="line">        key_on=<span class="string">'feature.properties.school_dist'</span>,</div><div class="line">        fill_color=<span class="string">'YlGn'</span>,</div><div class="line">        fill_opacity=<span class="number">0.7</span>,</div><div class="line">        line_opacity=<span class="number">0.2</span>,</div><div class="line">    )</div><div class="line">    districts.save(col+<span class="string">".html"</span>)</div><div class="line">    <span class="keyword">return</span> districts</div><div class="line"></div><div class="line">show_district_map(<span class="string">"sat_score"</span>)</div></pre></td></tr></table></figure>

<h2 id="Correlating-English-Learner-and-SAT-scores"><a href="#Correlating-English-Learner-and-SAT-scores" class="headerlink" title="Correlating English Learner and SAT scores"></a>Correlating English Learner and SAT scores</h2><p>Analyzing the precentage of English learner in District level; correlating the precentage of English learner to the overall SAT scores. The precentage of English learner is the percentage of students in each school who are learning English.</p>
<p>Group of schools with a high precentage of English Learner have low average SAT scores</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">full.plot.scatter(x=<span class="string">'ell_percent'</span>, y=<span class="string">'sat_score'</span>)</div><div class="line">show_district_map(<span class="string">"ell_percent"</span>)</div></pre></td></tr></table></figure>
<h3 style="text-align:center"> Corelation between precentage of english learner and SAt score</h3>

<img src="/2017/02/21/NYCHighschool/ell.png" alt="ell.png" title="">
<h3 style="text-align:center"> District level English Learner precentage </h3>

<img src="/2017/02/21/NYCHighschool/ell_precentage.png" alt="ell_precentage.png" title="">
<h2 id="Correlating-race-and-SAT-scores"><a href="#Correlating-race-and-SAT-scores" class="headerlink" title="Correlating race and SAT scores"></a>Correlating race and SAT scores</h2><p>Correlating the race and SAT scores. We can find that higher percentages of white and asian students correlate with higher SAT scores, but higher percentages of black and hispanic students correlate with lower SAT scores. </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">full.corr()[<span class="string">"sat_score"</span>][[<span class="string">"white_per"</span>, <span class="string">"asian_per"</span>, <span class="string">"black_per"</span>, <span class="string">"hispanic_per"</span>]].plot.bar()</div><div class="line">show_district_map(<span class="string">"white_per"</span>)</div><div class="line">show_district_map(<span class="string">"asian_per"</span>)</div><div class="line">show_district_map(<span class="string">"black_per"</span>)</div><div class="line">show_district_map(<span class="string">"hispanic_per"</span>)</div></pre></td></tr></table></figure>
<h3 style="text-align:center"> Corelation between Race and SAt score</h3>

<img src="/2017/02/21/NYCHighschool/race_diff.png" alt="race_diff.png" title="">
<h3 style="text-align:center"> District level Asian precentage </h3>

<img src="/2017/02/21/NYCHighschool/asian.png" alt="asian.png" title=""> 
<h3 style="text-align:center"> District level White precentage </h3>

<img src="/2017/02/21/NYCHighschool/white.png" alt="white.png" title=""> 
<h3 style="text-align:center"> District level Black precentage </h3>

<img src="/2017/02/21/NYCHighschool/black_pre.png" alt="black_pre.png" title=""> 
<h3 style="text-align:center"> District level Hispanic precentage </h3>

<img src="/2017/02/21/NYCHighschool/hispanic.png" alt="hispanic.png" title=""> 
<h3 style="text-align:center"> District level SAT Score </h3>

<img src="/2017/02/21/NYCHighschool/SATvisul.png" alt="SATvisul.png" title="">
<h2 id="Correlating-gender-and-SAT-scores"><a href="#Correlating-gender-and-SAT-scores" class="headerlink" title="Correlating gender and SAT scores"></a>Correlating gender and SAT scores</h2><p>We find that a higher percentage of females in a school tends to correlate with higher SAT scores. </p>
<h3 style="text-align:center"> Corelation between Gender and SAt score</h3>

<img src="/2017/02/21/NYCHighschool/gender.png" alt="gender.png" title="">

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/02/23/Soccer/" rel="prev" title="Soccer Game prediction using Deep learning">
                Soccer Game prediction using Deep learning <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>

          
          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/dw_image.jpg"
               alt="Dawei Wang" />
          <p class="site-author-name" itemprop="name">Dawei Wang</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#NYC-Public-High-School-SAT-Score-Analysis"><span class="nav-number">1.</span> <span class="nav-text">NYC Public High School SAT Score Analysis</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Background-Information"><span class="nav-number">2.</span> <span class="nav-text">Background Information</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Data"><span class="nav-number">3.</span> <span class="nav-text">Data</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Installation"><span class="nav-number">4.</span> <span class="nav-text">Installation</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Download-the-Repo"><span class="nav-number">4.1.</span> <span class="nav-text">Download the Repo</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Install-the-requirements"><span class="nav-number">4.2.</span> <span class="nav-text">Install the requirements</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Usage"><span class="nav-number">5.</span> <span class="nav-text">Usage</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Indexing"><span class="nav-number">6.</span> <span class="nav-text">Indexing</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Input-Data"><span class="nav-number">7.</span> <span class="nav-text">Input Data</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Unifing-Data"><span class="nav-number">8.</span> <span class="nav-text">Unifing Data</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Condensing-Data"><span class="nav-number">9.</span> <span class="nav-text">Condensing Data</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Combining-Datasets"><span class="nav-number">10.</span> <span class="nav-text">Combining Datasets</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#School-Location-Clustering"><span class="nav-number">11.</span> <span class="nav-text">School Location Clustering</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#School-Location-Heat-Map"><span class="nav-number">12.</span> <span class="nav-text">School Location Heat Map</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#District-Leavl-SAT-Scores-Mapping"><span class="nav-number">13.</span> <span class="nav-text">District Leavl SAT Scores Mapping</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Correlating-English-Learner-and-SAT-scores"><span class="nav-number">14.</span> <span class="nav-text">Correlating English Learner and SAT scores</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">14.1.</span> <span class="nav-text"> Corelation between precentage of english learner and SAt score</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">14.2.</span> <span class="nav-text"> District level English Learner precentage </span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Correlating-race-and-SAT-scores"><span class="nav-number">15.</span> <span class="nav-text">Correlating race and SAT scores</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">15.1.</span> <span class="nav-text"> Corelation between Race and SAt score</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">15.2.</span> <span class="nav-text"> District level Asian precentage </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">15.3.</span> <span class="nav-text"> District level White precentage </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">15.4.</span> <span class="nav-text"> District level Black precentage </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">15.5.</span> <span class="nav-text"> District level Hispanic precentage </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">15.6.</span> <span class="nav-text"> District level SAT Score </span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Correlating-gender-and-SAT-scores"><span class="nav-number">16.</span> <span class="nav-text">Correlating gender and SAT scores</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">16.1.</span> <span class="nav-text"> Corelation between Gender and SAt score</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        
        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  

  
      <!-- UY BEGIN -->
      <script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid="></script>
      <!-- UY END -->
  




  
  

  

  

  

  


</body>
</html>

<body>
<a href="https://github.com/demoninpiano"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"></a>
<body>